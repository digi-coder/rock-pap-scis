<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <script>
        function game(){
            //Setup Variables
            let i = 0;
            let playerScore = 0;
            let computerScore = 0;
                //Initiate a while loop to repeat game 5 times
                do {
                    i += 1;
                    //Prompt human player to choose between rock, paper and scissors
                    let playerSelection = prompt ("Pick: Rock, Paper or Scissors?");
                    //If player selection is not null, convert his choice to lower case,
                    if (playerSelection != null){
                        let playerSelectionL = playerSelection.toLowerCase();
                        //then confirm that player input is between either rock, paper or scissors only
                        if (playerSelectionL === "rock" || playerSelectionL === "paper" || playerSelectionL === "scissors"){
                            //If player choice correct, next let computer pick a choice
                            function computerPlay() {
                                let choices = ["rock", "paper", "scissors"];
                                let compSelection = Math.floor(Math.random() * choices.length);
                                return compChoice = choices[compSelection];
                            }
                            computerPlay();
                            //At each of the 5 game rounds, compare player selection to computer selection, pick a winner 
                            //for current game session, keep track and update players scores
                            function playRound(playerSelectionL, compChoice){
                                if (playerSelectionL === compChoice) {playerScore = ++playerScore; computerScore = ++computerScore;
                                    return `It\'s a tie! you both chose ${playerSelectionL}.`;
                                } else if (playerSelectionL === "rock" && compChoice === "paper") {computerScore = ++computerScore;
                                    return `You lose! ${compChoice} beats ${playerSelectionL}.`;
                                } else if (playerSelectionL === "rock" && compChoice === "scissors") {playerScore = ++playerScore;
                                    return `You Win! ${playerSelectionL} beats ${compChoice}.`;
                                } else if (playerSelectionL === "paper" && compChoice === "rock") {playerScore = ++playerScore;
                                    return `You Win! ${playerSelectionL} beats ${compChoice}.`;
                                } else if (playerSelectionL === "paper" && compChoice === "scissors") {computerScore = ++computerScore;
                                    return `You lose! ${compChoice} beats ${playerSelectionL}.`;
                                } else if (playerSelectionL === "scissors" && compChoice === "rock") {computerScore = ++computerScore;
                                    return `You lose! ${compChoice} beats ${playerSelectionL}.`;
                                } else if (playerSelectionL === "scissors" && compChoice === "paper") {playerScore = ++playerScore;
                                    return `You Win! ${playerSelectionL} beats ${compChoice}.`;
                                }
                            }
                            //At each game session, display player choice and computer choice
                            console.log(`Player chose: ${playerSelectionL}, Computer chose: ${compChoice}`);
                            //Pull data from the playRound function so that...
                            console.log(playRound(playerSelectionL, compChoice));
                            //...at each game session, we can display current player score and current computer score
                            console.log(`Player Score: ${playerScore}, Computer Score: ${computerScore}`);
                        } else {
                            //If player typed anything other than rock, paper or scissors in the prompt, display this
                            console.log("Poop!");
                        }
                    } else {
                        //If player input is null, display this
                        console.log("Poop L!");
                    }
              //Start the loop over if number of games is less than 5
            } while (i < 5);
            //Final score comparison and winner declaration
            if (playerScore === computerScore) {
                                console.log("Final Score: It's a tie!");
                            } else if (playerScore > computerScore) {
                                console.log("Final Score: You won!");
                            } else if (playerScore < computerScore) {
                                console.log("Final Score: You lost!");
                            }
                } 
        //Run the game
        game();
    </script>
</body>
</html>